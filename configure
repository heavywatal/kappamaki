#!/bin/sh
which cmake
echo "CXX: ${CXX:=$(${R_HOME}/bin/R CMD config CXX)}"
echo "R_PACKAGE_DIR: $R_PACKAGE_DIR"
BUILD_DIR=${R_SESSION_TMPDIR}/tumopp
cmake -Hsrc -B$BUILD_DIR -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_COMPILER=$CXX -DCMAKE_INSTALL_PREFIX=$R_PACKAGE_DIR
cmake --build $BUILD_DIR -- -j2
cmake --build $BUILD_DIR --target install
